<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>ËøúÁ®ãÊéßÂà∂</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div id="app">
        <!-- ËøûÊé•Áä∂ÊÄÅ -->
        <div id="status-bar">
            <span id="connection-status" class="connecting">ËøûÊé•‰∏≠...</span>
            <span id="fps-counter">0 FPS</span>
        </div>

        <!-- ‰∏ªÊòæÁ§∫Âå∫Âüü - ÂÖ®Â±èÊó†ÈÅÆÊå° -->
        <div id="screen-container">
            <img id="screen" src="/video" alt="ËøúÁ®ãÂ±èÂπï">
            <video id="screen-video" class="hidden" autoplay playsinline muted></video>
            <div id="touch-overlay"></div>

            <!-- ËôöÊãüÈº†Ê†áÊåáÈíà -->
            <div id="virtual-cursor" class="hidden">
                <div class="cursor-crosshair"></div>
                <div class="cursor-dot"></div>
            </div>

            <!-- ÊÇ¨ÊµÆËÆæÁΩÆÊåâÈíÆ -->
            <button id="settings-btn" class="floating-btn" title="ËÆæÁΩÆ">‚öôÔ∏è</button>

            <!-- Ê®°ÂºèÊåáÁ§∫Âô® -->
            <div id="mode-indicator">Ëß¶ÊéßÊ®°Âºè</div>
        </div>

        <!-- ËôöÊãüÊ∏∏ÊàèÊâãÊüÑ (Ê∏∏ÊàèÊ®°Âºè) -->
        <div id="gamepad-controls" class="hidden">
            <!-- Â∑¶ÊëáÊùÜ - ÁßªÂä® -->
            <div id="left-stick" class="virtual-stick">
                <div class="stick-base">
                    <div class="stick-handle"></div>
                </div>
                <span class="stick-label">ÁßªÂä® (WASD)</span>
            </div>

            <!-- Âä®‰ΩúÊåâÈíÆ -->
            <div id="action-buttons">
                <button class="action-btn" data-key="e">E<br><small>ÊäÄËÉΩ</small></button>
                <button class="action-btn" data-key="r">R<br><small>ÊäÄËÉΩ</small></button>
                <button class="action-btn" data-key="t">T<br><small>ÊäÄËÉΩ</small></button>
                <button class="action-btn" data-key="q">Q<br><small>ÊäÄËÉΩ</small></button>
                <button class="action-btn" data-key="x">X<br><small>ÊäÄËÉΩ</small></button>
                <button class="action-btn" data-key="f">F<br><small>‰∫§‰∫í</small></button>
                <button class="action-btn" data-key="Space">Space<br><small>Ë∑≥Ë∑É</small></button>
            </div>

            <div id="mouse-buttons">
                <button class="mouse-btn primary" data-mouse="left">Â∑¶ÈîÆ<br><small>ÊôÆÊîª</small></button>
                <button class="mouse-btn" data-mouse="right">Âè≥ÈîÆ<br><small>ÁûÑÂáÜ</small></button>
            </div>

            <!-- È¢ùÂ§ñÂäüËÉΩÈîÆ -->
            <div id="extra-buttons">
                <button class="extra-btn" data-key="Tab">ËÉåÂåÖ<br>Tab</button>
                <button class="extra-btn" data-key="Escape">ËèúÂçï<br>Esc</button>
                <button class="extra-btn toggle" data-key="Alt">Alt<br>ÂàáÊç¢</button>
            </div>
        </div>

        <!-- ËôöÊãüÈîÆÁõò -->
        <div id="keyboard-controls" class="hidden">
            <div id="virtual-keyboard">
                <!-- ÂäüËÉΩÈîÆË°å -->
                <div class="kb-row">
                    <button class="kb-key kb-func" data-key="Escape">Esc</button>
                    <button class="kb-key" data-key="1">1</button>
                    <button class="kb-key" data-key="2">2</button>
                    <button class="kb-key" data-key="3">3</button>
                    <button class="kb-key" data-key="4">4</button>
                    <button class="kb-key" data-key="5">5</button>
                    <button class="kb-key" data-key="6">6</button>
                    <button class="kb-key" data-key="7">7</button>
                    <button class="kb-key" data-key="8">8</button>
                    <button class="kb-key" data-key="9">9</button>
                    <button class="kb-key" data-key="0">0</button>
                    <button class="kb-key" data-key="-">-</button>
                    <button class="kb-key" data-key="=">=</button>
                    <button class="kb-key kb-func" data-key="Backspace">‚å´</button>
                </div>
                <!-- QWERTYË°å -->
                <div class="kb-row">
                    <button class="kb-key kb-func" data-key="Tab">Tab</button>
                    <button class="kb-key" data-key="q">Q</button>
                    <button class="kb-key" data-key="w">W</button>
                    <button class="kb-key" data-key="e">E</button>
                    <button class="kb-key" data-key="r">R</button>
                    <button class="kb-key" data-key="t">T</button>
                    <button class="kb-key" data-key="y">Y</button>
                    <button class="kb-key" data-key="u">U</button>
                    <button class="kb-key" data-key="i">I</button>
                    <button class="kb-key" data-key="o">O</button>
                    <button class="kb-key" data-key="p">P</button>
                    <button class="kb-key" data-key="[">[</button>
                    <button class="kb-key" data-key="]">]</button>
                    <button class="kb-key" data-key="\\">\\</button>
                </div>
                <!-- ASDFË°å -->
                <div class="kb-row">
                    <button class="kb-key kb-func" data-key="CapsLock">Caps</button>
                    <button class="kb-key" data-key="a">A</button>
                    <button class="kb-key" data-key="s">S</button>
                    <button class="kb-key" data-key="d">D</button>
                    <button class="kb-key" data-key="f">F</button>
                    <button class="kb-key" data-key="g">G</button>
                    <button class="kb-key" data-key="h">H</button>
                    <button class="kb-key" data-key="j">J</button>
                    <button class="kb-key" data-key="k">K</button>
                    <button class="kb-key" data-key="l">L</button>
                    <button class="kb-key" data-key=";">;</button>
                    <button class="kb-key" data-key="'">'</button>
                    <button class="kb-key kb-func kb-enter" data-key="Enter">‚Üµ</button>
                </div>
                <!-- ZXCVË°å -->
                <div class="kb-row">
                    <button class="kb-key kb-func kb-shift" data-key="Shift">Shift</button>
                    <button class="kb-key" data-key="z">Z</button>
                    <button class="kb-key" data-key="x">X</button>
                    <button class="kb-key" data-key="c">C</button>
                    <button class="kb-key" data-key="v">V</button>
                    <button class="kb-key" data-key="b">B</button>
                    <button class="kb-key" data-key="n">N</button>
                    <button class="kb-key" data-key="m">M</button>
                    <button class="kb-key" data-key=",">,</button>
                    <button class="kb-key" data-key=".">.</button>
                    <button class="kb-key" data-key="/">/</button>
                    <button class="kb-key kb-func kb-shift" data-key="Shift">Shift</button>
                </div>
                <!-- Â∫ïÈÉ®ÊéßÂà∂Ë°å -->
                <div class="kb-row kb-bottom-row">
                    <button class="kb-key kb-ctrl" data-key="Control">Ctrl</button>
                    <button class="kb-key kb-space" data-key="Space">Á©∫Ê†º</button>
                    <button class="kb-key kb-ctrl" data-key="Alt">Alt</button>
                    <div class="kb-arrow-group kb-arrow-horizontal">
                        <button class="kb-key kb-arrow" data-key="ArrowLeft">‚Üê</button>
                        <button class="kb-key kb-arrow" data-key="ArrowDown">‚Üì</button>
                        <button class="kb-key kb-arrow" data-key="ArrowRight">‚Üí</button>
                        <button class="kb-key kb-arrow" data-key="ArrowUp">‚Üë</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ËÆæÁΩÆÈù¢Êùø -->
        <div id="settings-panel" class="hidden">
            <div class="settings-content">
                <div class="settings-header">
                    <h3>ËÆæÁΩÆ</h3>
                    <button id="close-settings" class="settings-close" title="ÂÖ≥Èó≠">√ó</button>
                </div>

                <!-- Ê®°ÂºèÂàáÊç¢ - ÁßªÂÖ•ËÆæÁΩÆ -->
                <div class="setting-section">
                    <label>ÊéßÂà∂Ê®°Âºè</label>
                    <div id="mode-tabs">
                        <button class="mode-btn active" data-mode="touch">Ëß¶ÊéßÊ®°Âºè</button>
                        <button class="mode-btn" data-mode="gamepad">Ê∏∏ÊàèÊ®°Âºè</button>
                        <button class="mode-btn" data-mode="controller">ÊâãÊüÑÊ®°Âºè</button>
                    </div>
                    <div id="mode-description" class="mode-desc">
                        ÂçïÊåá=Èº†Ê†áÁßªÂä®ÔºåÁÇπÂáª=Â∑¶ÈîÆÔºåÂèåÊåá=Âè≥ÈîÆ/ÊªöËΩÆ
                    </div>
                </div>

                <div id="global-settings">
                    <div class="setting-section">
                        <label>Â∑•ÂÖ∑</label>

                        <div class="setting-item">
                            <label>ÈîÆÁõò</label>
                            <input type="checkbox" id="keyboard-toggle-btn">
                            <span id="keyboard-toggle-text">ÂÖ≥Èó≠</span>
                        </div>

                        <div class="setting-item">
                            <label>ÂÖ®Â±èÊòæÁ§∫</label>
                            <input type="checkbox" id="fullscreen-btn">
                            <span id="fullscreen-text">ÂÖ≥Èó≠</span>
                        </div>

                        <div class="setting-item">
                            <label>‰ΩéÂª∂Ëøü</label>
                            <input type="checkbox" id="low-latency-mode" checked>
                            <span>ÂêØÁî®</span>
                        </div>
                    </div>

                    <div class="setting-section">
                        <label>ÁîªÈù¢</label>

                        <div class="setting-item">
                            <label>ÁîªË¥®</label>
                            <input type="range" id="quality-slider" min="20" max="80" value="80">
                            <span id="quality-value">80</span>
                        </div>

                        <div class="setting-item">
                            <label>Â∏ßÁéá</label>
                            <input type="range" id="fps-slider" min="15" max="60" value="60">
                            <span id="fps-value">60</span>
                        </div>

                        <div class="setting-item">
                            <label>ÁîªÈù¢ÂÄçÁéá</label>
                            <input type="range" id="webrtc-scale-slider" min="0.5" max="1.0" step="0.5" value="1.0">
                            <span id="webrtc-scale-value">1.0x</span>
                        </div>

                        <div class="setting-item">
                            <label>Èº†Ê†áÁÅµÊïè</label>
                            <input type="range" id="sensitivity-slider" min="0.5" max="6" step="0.1" value="3.0">
                            <span id="sensitivity-value">3.0x</span>
                        </div>
                    </div>
                </div>

                <!-- Ê∏∏ÊàèÊ®°Âºè‰∏ìÁî®ËÆæÁΩÆ -->
                <div id="game-mode-settings" class="hidden">
                    <div class="setting-section">
                        <label>üéÆ Ê∏∏ÊàèÊ®°ÂºèÈÄâÈ°π</label>

                        <div class="setting-item">
                            <label>ËßÜËßíÁÅµÊïèÂ∫¶</label>
                            <input type="range" id="camera-sensitivity-slider" min="0" max="100" step="1" value="100">
                            <span id="camera-sensitivity-value">100</span>
                        </div>

                        <div class="setting-item">
                            <label>ÂèåÊåáÁº©ÊîæÁÅµÊïèÂ∫¶</label>
                            <input type="range" id="pinch-sensitivity-slider" min="0.1" max="1.0" step="0.05" value="0.25">
                            <span id="pinch-sensitivity-value">0.25</span>
                        </div>

                        <div class="setting-item">
                            <label>ÊòæÁ§∫Èº†Ê†áÁ∫¢ÁÇπ</label>
                            <input type="checkbox" id="show-cursor-dot" checked>
                            <span id="cursor-dot-status">ÊòæÁ§∫</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/socket.io.min.js"></script>
    <script src="/static/app.js"></script>
</body>
</html>
